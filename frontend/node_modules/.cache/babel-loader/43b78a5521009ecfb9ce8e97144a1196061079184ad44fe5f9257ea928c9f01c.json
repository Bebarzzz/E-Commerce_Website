{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ahmad\\\\Downloads\\\\E-Commerce_Website-main (3)\\\\E-Commerce_Website-main\\\\frontend\\\\src\\\\Context\\\\ShopContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from \"react\";\nimport { getAllCars } from \"../services/carService\";\nimport { NotificationContext } from \"./NotificationContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ShopContext = /*#__PURE__*/createContext(null);\nconst ShopContextProvider = props => {\n  _s();\n  const [allProducts, setAllProducts] = useState([]);\n  const [cartItems, setCartItems] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    notify\n  } = useContext(NotificationContext);\n\n  // Fetch cars from backend on component mount\n  useEffect(() => {\n    const fetchCars = async () => {\n      try {\n        setLoading(true);\n        const cars = await getAllCars();\n\n        // Transform backend car data to match frontend structure\n        const transformedCars = cars.map(car => ({\n          id: car._id,\n          name: `${car.manufactureYear} ${car.brand} ${car.model}`,\n          category: car.condition,\n          image: car.images && car.images.length > 0 ? car.images[0] : null,\n          new_price: car.price,\n          // Keep all original backend fields\n          ...car\n        }));\n        setAllProducts(transformedCars);\n        setError(null);\n      } catch (err) {\n        console.error(\"Failed to fetch cars:\", err);\n        setError(err.message);\n        notify(\"Failed to load products from server.\", \"error\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchCars();\n  }, [notify]);\n  const addToCart = itemId => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: (prev[itemId] || 0) + 1\n    }));\n  };\n  const removeFromCart = itemId => {\n    setCartItems(prev => {\n      const newCart = {\n        ...prev\n      };\n      if (newCart[itemId] > 0) {\n        newCart[itemId] -= 1;\n      }\n      return newCart;\n    });\n  };\n  const clearCart = () => {\n    setCartItems({});\n  };\n  const getTotalCartAmount = () => {\n    let totalAmount = 0;\n    for (const item in cartItems) {\n      if (cartItems[item] > 0) {\n        const itemInfo = allProducts.find(product => product.id === item);\n        if (itemInfo) {\n          totalAmount += itemInfo.new_price * cartItems[item];\n        }\n      }\n    }\n    return totalAmount;\n  };\n  const getTotalCartItems = () => {\n    let totalItem = 0;\n    for (const item in cartItems) {\n      if (cartItems[item] > 0) {\n        totalItem += cartItems[item];\n      }\n    }\n    return totalItem;\n  };\n  const refreshProducts = async () => {\n    try {\n      setLoading(true);\n      const cars = await getAllCars();\n      const transformedCars = cars.map(car => ({\n        id: car._id,\n        name: `${car.manufactureYear} ${car.brand} ${car.model}`,\n        category: car.condition,\n        image: car.images && car.images.length > 0 ? car.images[0] : null,\n        new_price: car.price,\n        ...car\n      }));\n      setAllProducts(transformedCars);\n      setError(null);\n    } catch (err) {\n      console.error(\"Failed to refresh cars:\", err);\n      setError(err.message);\n      notify(\"Failed to refresh products.\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const contextValue = {\n    all_product: allProducts,\n    cartItems,\n    addToCart,\n    removeFromCart,\n    clearCart,\n    getTotalCartItems,\n    getTotalCartAmount,\n    loading,\n    error,\n    refreshProducts\n  };\n  return /*#__PURE__*/_jsxDEV(ShopContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this);\n};\n_s(ShopContextProvider, \"xkHTY6TXIgSh8FZgmjSkfxOAmQA=\");\n_c = ShopContextProvider;\nexport default ShopContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ShopContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","getAllCars","NotificationContext","jsxDEV","_jsxDEV","ShopContext","ShopContextProvider","props","_s","allProducts","setAllProducts","cartItems","setCartItems","loading","setLoading","error","setError","notify","fetchCars","cars","transformedCars","map","car","id","_id","name","manufactureYear","brand","model","category","condition","image","images","length","new_price","price","err","console","message","addToCart","itemId","prev","removeFromCart","newCart","clearCart","getTotalCartAmount","totalAmount","item","itemInfo","find","product","getTotalCartItems","totalItem","refreshProducts","contextValue","all_product","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ahmad/Downloads/E-Commerce_Website-main (3)/E-Commerce_Website-main/frontend/src/Context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from \"react\";\nimport { getAllCars } from \"../services/carService\";\nimport { NotificationContext } from \"./NotificationContext\";\n\nexport const ShopContext = createContext(null);\n\nconst ShopContextProvider = (props) => {\n  const [allProducts, setAllProducts] = useState([]);\n  const [cartItems, setCartItems] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const { notify } = useContext(NotificationContext);\n\n  // Fetch cars from backend on component mount\n  useEffect(() => {\n    const fetchCars = async () => {\n      try {\n        setLoading(true);\n        const cars = await getAllCars();\n\n        // Transform backend car data to match frontend structure\n        const transformedCars = cars.map((car) => ({\n          id: car._id,\n          name: `${car.manufactureYear} ${car.brand} ${car.model}`,\n          category: car.condition,\n          image: car.images && car.images.length > 0 ? car.images[0] : null,\n          new_price: car.price,\n          // Keep all original backend fields\n          ...car\n        }));\n\n        setAllProducts(transformedCars);\n        setError(null);\n      } catch (err) {\n        console.error(\"Failed to fetch cars:\", err);\n        setError(err.message);\n        notify(\"Failed to load products from server.\", \"error\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCars();\n  }, [notify]);\n\n  const addToCart = (itemId) => {\n    setCartItems((prev) => ({\n      ...prev,\n      [itemId]: (prev[itemId] || 0) + 1\n    }));\n  };\n\n  const removeFromCart = (itemId) => {\n    setCartItems((prev) => {\n      const newCart = { ...prev };\n      if (newCart[itemId] > 0) {\n        newCart[itemId] -= 1;\n      }\n      return newCart;\n    });\n  };\n\n  const clearCart = () => {\n    setCartItems({});\n  };\n\n  const getTotalCartAmount = () => {\n    let totalAmount = 0;\n    for (const item in cartItems) {\n      if (cartItems[item] > 0) {\n        const itemInfo = allProducts.find((product) => product.id === item);\n        if (itemInfo) {\n          totalAmount += itemInfo.new_price * cartItems[item];\n        }\n      }\n    }\n    return totalAmount;\n  };\n\n  const getTotalCartItems = () => {\n    let totalItem = 0;\n    for (const item in cartItems) {\n      if (cartItems[item] > 0) {\n        totalItem += cartItems[item];\n      }\n    }\n    return totalItem;\n  };\n\n  const refreshProducts = async () => {\n    try {\n      setLoading(true);\n      const cars = await getAllCars();\n      const transformedCars = cars.map((car) => ({\n        id: car._id,\n        name: `${car.manufactureYear} ${car.brand} ${car.model}`,\n        category: car.condition,\n        image: car.images && car.images.length > 0 ? car.images[0] : null,\n        new_price: car.price,\n        ...car\n      }));\n      setAllProducts(transformedCars);\n      setError(null);\n    } catch (err) {\n      console.error(\"Failed to refresh cars:\", err);\n      setError(err.message);\n      notify(\"Failed to refresh products.\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const contextValue = {\n    all_product: allProducts,\n    cartItems,\n    addToCart,\n    removeFromCart,\n    clearCart,\n    getTotalCartItems,\n    getTotalCartAmount,\n    loading,\n    error,\n    refreshProducts\n  };\n\n  return (\n    <ShopContext.Provider value={contextValue}>\n      {props.children}\n    </ShopContext.Provider>\n  );\n};\n\nexport default ShopContextProvider;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}