{"ast":null,"code":"import { API_ENDPOINTS, apiRequest } from '../config/api';\n\n/**\n * User Service - Handles all user authentication and profile API calls\n */\n\n/**\n * Login user\n * @param {Object} credentials - User credentials\n * @param {string} credentials.email - User email\n * @param {string} credentials.password - User password\n * @returns {Promise<Object>} Response containing token and user data\n */\nexport const loginUser = async credentials => {\n  try {\n    const data = await apiRequest(API_ENDPOINTS.LOGIN, {\n      method: 'POST',\n      body: JSON.stringify(credentials)\n    });\n\n    // Store auth token and user data\n    if (data.token) {\n      localStorage.setItem('auth-token', data.token);\n      if (credentials.email) {\n        localStorage.setItem('user-email', credentials.email);\n      }\n      // Store user role if available\n      if (data.role) {\n        localStorage.setItem('user-role', data.role);\n      }\n      // Store user ID if available\n      if (data.userId) {\n        localStorage.setItem('user-id', data.userId);\n      }\n    }\n    return data;\n  } catch (error) {\n    console.error('Login error:', error);\n    throw error;\n  }\n};\n\n/**\n * Signup new user\n * @param {Object} userData - New user data\n * @param {string} userData.username - Username\n * @param {string} userData.email - User email\n * @param {string} userData.password - User password\n * @returns {Promise<Object>} Response containing token and user data\n */\nexport const signupUser = async userData => {\n  try {\n    const data = await apiRequest(API_ENDPOINTS.SIGNUP, {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n\n    // Store auth token and user data\n    if (data.token) {\n      localStorage.setItem('auth-token', data.token);\n      if (userData.email) {\n        localStorage.setItem('user-email', userData.email);\n      }\n      // Store user role if available\n      if (data.role) {\n        localStorage.setItem('user-role', data.role);\n      }\n      // Store user ID if available\n      if (data.userId) {\n        localStorage.setItem('user-id', data.userId);\n      }\n    }\n    return data;\n  } catch (error) {\n    console.error('Signup error:', error);\n    throw error;\n  }\n};\n\n/**\n * Logout user\n */\nexport const logoutUser = () => {\n  localStorage.removeItem('auth-token');\n  localStorage.removeItem('user-email');\n  localStorage.removeItem('user-role');\n  localStorage.removeItem('user-id');\n};\n\n/**\n * Check if user is authenticated\n * @returns {boolean} True if user has valid token\n */\nexport const isAuthenticated = () => {\n  const token = localStorage.getItem('auth-token');\n  return !!token;\n};\n\n/**\n * Check if current user is admin\n * @returns {boolean} True if user has admin role\n */\nexport const isAdmin = () => {\n  const role = localStorage.getItem('user-role');\n  return role === 'admin';\n};\n\n/**\n * Get current user role\n * @returns {string|null} User role ('customer' or 'admin') or null\n */\nexport const getUserRole = () => {\n  return localStorage.getItem('user-role');\n};\n\n/**\n * Get current user ID\n * @returns {string|null} User ID or null\n */\nexport const getUserId = () => {\n  return localStorage.getItem('user-id');\n};\n\n/**\n * Get current user email from storage\n * @returns {string|null} User email or null\n */\nexport const getCurrentUserEmail = () => {\n  return localStorage.getItem('user-email');\n};\n\n/**\n * Get auth token\n * @returns {string|null} Auth token or null\n */\nexport const getAuthToken = () => {\n  return localStorage.getItem('auth-token');\n};","map":{"version":3,"names":["API_ENDPOINTS","apiRequest","loginUser","credentials","data","LOGIN","method","body","JSON","stringify","token","localStorage","setItem","email","role","userId","error","console","signupUser","userData","SIGNUP","logoutUser","removeItem","isAuthenticated","getItem","isAdmin","getUserRole","getUserId","getCurrentUserEmail","getAuthToken"],"sources":["C:/Users/ahmad/Downloads/E-Commerce_Website-main (3)/E-Commerce_Website-main/frontend/src/services/userService.js"],"sourcesContent":["import { API_ENDPOINTS, apiRequest } from '../config/api';\n\n/**\n * User Service - Handles all user authentication and profile API calls\n */\n\n/**\n * Login user\n * @param {Object} credentials - User credentials\n * @param {string} credentials.email - User email\n * @param {string} credentials.password - User password\n * @returns {Promise<Object>} Response containing token and user data\n */\nexport const loginUser = async (credentials) => {\n  try {\n    const data = await apiRequest(API_ENDPOINTS.LOGIN, {\n      method: 'POST',\n      body: JSON.stringify(credentials),\n    });\n\n    // Store auth token and user data\n    if (data.token) {\n      localStorage.setItem('auth-token', data.token);\n      if (credentials.email) {\n        localStorage.setItem('user-email', credentials.email);\n      }\n      // Store user role if available\n      if (data.role) {\n        localStorage.setItem('user-role', data.role);\n      }\n      // Store user ID if available\n      if (data.userId) {\n        localStorage.setItem('user-id', data.userId);\n      }\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Login error:', error);\n    throw error;\n  }\n};\n\n/**\n * Signup new user\n * @param {Object} userData - New user data\n * @param {string} userData.username - Username\n * @param {string} userData.email - User email\n * @param {string} userData.password - User password\n * @returns {Promise<Object>} Response containing token and user data\n */\nexport const signupUser = async (userData) => {\n  try {\n    const data = await apiRequest(API_ENDPOINTS.SIGNUP, {\n      method: 'POST',\n      body: JSON.stringify(userData),\n    });\n\n    // Store auth token and user data\n    if (data.token) {\n      localStorage.setItem('auth-token', data.token);\n      if (userData.email) {\n        localStorage.setItem('user-email', userData.email);\n      }\n      // Store user role if available\n      if (data.role) {\n        localStorage.setItem('user-role', data.role);\n      }\n      // Store user ID if available\n      if (data.userId) {\n        localStorage.setItem('user-id', data.userId);\n      }\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Signup error:', error);\n    throw error;\n  }\n};\n\n/**\n * Logout user\n */\nexport const logoutUser = () => {\n  localStorage.removeItem('auth-token');\n  localStorage.removeItem('user-email');\n  localStorage.removeItem('user-role');\n  localStorage.removeItem('user-id');\n};\n\n/**\n * Check if user is authenticated\n * @returns {boolean} True if user has valid token\n */\nexport const isAuthenticated = () => {\n  const token = localStorage.getItem('auth-token');\n  return !!token;\n};\n\n/**\n * Check if current user is admin\n * @returns {boolean} True if user has admin role\n */\nexport const isAdmin = () => {\n  const role = localStorage.getItem('user-role');\n  return role === 'admin';\n};\n\n/**\n * Get current user role\n * @returns {string|null} User role ('customer' or 'admin') or null\n */\nexport const getUserRole = () => {\n  return localStorage.getItem('user-role');\n};\n\n/**\n * Get current user ID\n * @returns {string|null} User ID or null\n */\nexport const getUserId = () => {\n  return localStorage.getItem('user-id');\n};\n\n/**\n * Get current user email from storage\n * @returns {string|null} User email or null\n */\nexport const getCurrentUserEmail = () => {\n  return localStorage.getItem('user-email');\n};\n\n/**\n * Get auth token\n * @returns {string|null} Auth token or null\n */\nexport const getAuthToken = () => {\n  return localStorage.getItem('auth-token');\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}